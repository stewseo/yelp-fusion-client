/*****************************************************************************
 *         plugins                                                      *
 *****************************************************************************/

plugins {
    id 'io.github.stewseo.java-conventions'
}

/*****************************************************************************
 *         java                                                             *
 *****************************************************************************/

group = 'io.github.stewseo'

java {
    withJavadocJar()
    withSourcesJar()
}

tasks.register('temporaldata-service-print-test') {
    doLast {
        println 'temporaldata-service print test' + ', rootProject.path: ' + rootProject.path + ' project path: ' + project.path
        println 'archiveFileName: ' + archiveFileName + ' archiveVersion: ' + archiveVersion
    }
}

jar {

    archiveFileName.set('temporaldata-service')
    archiveVersion.set(version)

    manifest {
        attributes("Implementation-Title": archiveFileName,
                "Implementation-Version": archiveVersion)
    }

    from {
        configurations.compileClasspath.filter { it.exists() }.collect { it.isDirectory() ? it : zipTree(it) }
    }

    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
}

/*****************************************************************************
 *         :temporaldata-service dependencies                         *
 *****************************************************************************/

dependencies {
    api 'com.breinify:brein-api-library-java:2.2.0'
    api 'com.breinify:brein-time-utilities:1.8.0'
    api 'com.mashape.unirest:unirest-java:1.4.9'
    api 'com.sun.jersey:jersey-client:1.19.4'
}

/*****************************************************************************
 *         :testing                                                         *
 *****************************************************************************/

test {
    filter {
        excludeTestsMatching "io.*.*.temporaldata-service.*"
    }
}

/*****************************************************************************
 *         publishing                                                       *
 *****************************************************************************/
